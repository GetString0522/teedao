<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <link href="../static/global/plugins/font-awesome/css/font-awesome.min.css" th:href="@{/global/plugins/font-awesome/css/font-awesome.min.css}" rel="stylesheet" type="text/css" />
    <link href="../static/global/plugins/bootstrap/css/bootstrap.min.css" th:href="@{/global/plugins/bootstrap/css/bootstrap.min.css}" rel="stylesheet" type="text/css"/>
    <link href="../static/global/plugins/select2/css/select2.min.css" th:href="@{/global/plugins/select2/css/select2.min.css}" rel="stylesheet" type="text/css" />
    <link href="../static/global/plugins/select2/css/select2-bootstrap.min.css" th:href="@{/global/plugins/select2/css/select2-bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <link href="../static/global/css/components.min.css" th:href="@{/global/css/components.min.css}" rel="stylesheet" id="style_components" type="text/css"/>
    <link href="../static/global/css/plugins.min.css" th:href="@{/global/css/plugins.min.css}" rel="stylesheet" type="text/css"/>
    <link href="../static/layouts/layout/css/layout.css" th:href="@{/layouts/layout/css/layout.css}" rel="stylesheet" type="text/css"/>
    <link href="../static/layouts/layout/css/custom.css" th:href="@{/layouts/layout/css/custom.css}" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <a href="#">用户权限管理</a>
            <i class="fa fa-circle"></i>
        </li>
        <li>
            <span>资源编辑</span>
        </li>
    </ul>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-gift"></i>录入框
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"> </a>
                </div>
            </div>
            <div class="portlet-body form">
                <form id="edit_form" class="form-horizontal" action="#" method="post">
                    <div class="form-body">
                        <div th:if="${parent.name} != null" class="form-group">
                            <label class="col-md-3 control-label">父节点名称</label>
                            <div class="col-md-4">
                                <p class="form-control-static" th:text="${parent.name}"></p>
                                <input type="hidden" name="parentId" th:value="${parent.id}"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">节点名称<span class="required"> * </span></label>
                            <div class="col-md-4">
                                <input type="text" name="name" th:value="${resource.name}" class="form-control"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">URL</label>
                            <div class="col-md-4">
                                <input type="text" name="url" th:value="${resource.url}" class="form-control"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">权限代码</label>
                            <div class="col-md-4">
                                <input type="text" name="permission" th:value="${resource.permission}" class="form-control"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">图标</label>
                            <div class="col-md-4">
                                <input type="text" name="icon" th:value="${resource.icon}" class="form-control"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">排序<span class="required"> * </span></label>
                            <div class="col-md-4">
                                <input type="text" name="orderNo" th:value="${resource.orderNo}" class="form-control"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">类型<span class="required"> * </span></label>
                            <div class="col-md-4">
                                <div class="radio-list" data-error-container="#form_type_error">
                                    <label class="radio-inline">
                                        <input type="radio" name="type" id="type_m" value="menu"/>菜单</label>
                                    <label class="radio-inline">
                                        <input type="radio" name="type" id="type_b" value="button"/>按钮</label>
                                </div>
                                <div id="form_type_error"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">状态<span class="required"> * </span></label>
                            <div class="col-md-4">
                                <div class="radio-list" data-error-container="#form_available_error">
                                    <label class="radio-inline">
                                        <input type="radio" name="available" id="ava_a" value="1"/>可用</label>
                                    <label class="radio-inline">
                                        <input type="radio" name="available" id="ava_u" value="0"/>不可用</label>
                                </div>
                                <div id="form_available_error"></div>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-danger display-hide">
                        <button class="close" data-close="alert"></button>
                        <span></span>
                    </div>
                    <div class="form-actions">
                        <div class="row">
                            <div class="col-md-offset-3 col-md-9">
                                <button class="btn green" type="submit">保存</button>
                                <button class="btn default" onclick="javascript:history.back();" type="button">返回</button>                            </div>
                        </div>
                    </div>
                </form>
                <!-- END FORM-->
            </div>
        </div>
    </div>
</div>
<!-- END FOOTER -->
<!--[if lt IE 9]>
<script src="../static/global/plugins/respond.min.js" th:src="@{/global/plugins/respond.min.js}"></script>
<script src="../static/global/plugins/excanvas.min.js" th:src="@{/global/plugins/excanvas.min.js}"></script>
<script src="../static/global/plugins/ie8.fix.min.js" th:src="@{/global/plugins/ie8.fix.min.js}"></script>
<![endif]-->
<script src="../static/global/plugins/jquery.min.js" th:src="@{/global/plugins/jquery.min.js}" type="text/javascript"></script>
<script src="../static/global/plugins/bootstrap/js/bootstrap.min.js" th:src="@{/global/plugins/bootstrap/js/bootstrap.min.js}" type="text/javascript"></script>
<script src="../static/global/plugins/jquery.blockui.min.js" th:src="@{/global/plugins/jquery.blockui.min.js}" type="text/javascript"></script>
<script src="../static/global/plugins/select2/js/select2.full.min.js" th:src="@{/global/plugins/select2/js/select2.full.min.js}" type="text/javascript"></script>
<script src="../static/global/scripts/app.js" th:src="@{/global/scripts/app.js}" type="text/javascript"></script>
<script src="../static/layouts/layout/scripts/layout.js" th:src="@{/layouts/layout/scripts/layout.js}" type="text/javascript"></script>
<script src="../static/global/plugins/jquery-validation/js/jquery.validate.min.js" th:src="@{/global/plugins/jquery-validation/js/jquery.validate.min.js}" type="text/javascript"></script>
<script src="../static/global/plugins/jquery-validation/js/additional-methods.min.js" th:src="@{/global/plugins/jquery-validation/js/additional-methods.min.js}" type="text/javascript"></script>
<script src="../static/global/plugins/jquery.form.min.js" th:src="@{/global/plugins/jquery.form.min.js}" type="text/javascript"></script>
<script src="../static/layouts/page/scripts/rbac_resource_edit.js" th:src="@{/layouts/page/scripts/rbac_resource_edit.js}" type="text/javascript"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    //多选列表渲染
    var resourceId = [[${resource.id}]];
    var resourceType = [[${resource.type}]];
    var resourceStatus = [[${resource.available}]];
    var op = [[${op}]];
    if(op=='update'){
        $('#edit_form').attr("action","/resource/"+resourceId+"/update");
        if(resourceStatus){
            $('#ava_a').attr('checked',true);
        }else{
            $('#ava_u').attr('checked',true);
        }
        $("input[name='type'][value='"+resourceType+"']").attr("checked", true);
        App.updateUniform("#type_m,#type_b,#ava_u,#ava_a");
    }else{
        var parentId = /*[[${parent.id}]]*/ null;
        $('#edit_form').attr("action","/resource/"+parentId+"/append");
    }

    /*]]>*/
</script>
</body>
</html>